"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }var _chunkMDTPJIYGcjs = require('../chunk-MDTPJIYG.cjs');var _chunkN32LB23Ccjs = require('../chunk-N32LB23C.cjs');var _path = require('path');var _fs = require('fs');var _execa = require('execa'); var _execa2 = _interopRequireDefault(_execa);var _findup = require('find-up'); var _findup2 = _interopRequireDefault(_findup);function u(){try{let e=_findup2.default.sync(r=>_findup2.default.sync.exists(_path.join.call(void 0, r,".vercel","project.json"))?r:void 0,{type:"directory"});if(_chunkN32LB23Ccjs.f.call(void 0, "Found vercel directory",e),e){let r=JSON.parse(_fs.readFileSync.call(void 0, _path.join.call(void 0, e,".vercel","project.json"),"utf8"));return _chunkN32LB23Ccjs.f.call(void 0, "Found vercel project.json",r),{ownerId:r.orgId,projectId:r.projectId}}console.log("[vercel-toolbar] No project info found. Make sure you run `vc link` in your project directory.")}catch(e){_chunkN32LB23Ccjs.f.call(void 0, "Error finding project info",e);return}}function E(){try{let e=_execa2.default.sync("git",["branch","--show-current"]);return!e.stdout&&e.stderr&&_chunkN32LB23Ccjs.f.call(void 0, "Error getting current git branch",e.stderr),e.stdout.trim()}catch(e){_chunkN32LB23Ccjs.f.call(void 0, "Error getting current git branch",e);return}}function I(e={}){return{name:"vite-plugin-vercel-toolbar",config:(r,{mode:n})=>{let i={"import.meta.env.VERCEL_TOOLBAR_DEPLOYMENT_ID":process.env.VERCEL_DEPLOYMENT_ID?`"${process.env.VERCEL_DEPLOYMENT_ID}"`:"undefined"},o,c;return n==="development"&&(o=u(),c=E()),o?{define:{"import.meta.env.VERCEL_TOOLBAR_SERVER":`"http://localhost:${_chunkMDTPJIYGcjs.c.call(void 0, {portFromConfig:e.devServerPort})}"`,"import.meta.env.VERCEL_TOOLBAR_OWNER_ID":`"${o.ownerId}"`,"import.meta.env.VERCEL_TOOLBAR_PROJECT_ID":`"${o.projectId}"`,"import.meta.env.VERCEL_TOOLBAR_BRANCH":`"${_nullishCoalesce(c, () => (""))}"`,...i}}:{define:{"import.meta.env.VERCEL_TOOLBAR_SERVER":"undefined","import.meta.env.VERCEL_TOOLBAR_OWNER_ID":"undefined","import.meta.env.VERCEL_TOOLBAR_PROJECT_ID":"undefined","import.meta.env.VERCEL_TOOLBAR_BRANCH":"undefined",...i}}}}}exports.vercelToolbar = I;
