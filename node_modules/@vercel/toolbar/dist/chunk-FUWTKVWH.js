var a="__vtcr",h=1,i=class{commands;changeHandlers;constructor(){this.commands=[],this.changeHandlers=new Set}onChange(e){return this.changeHandlers.add(e),()=>this.changeHandlers.delete(e)}emitChange(){for(let e of this.changeHandlers)e()}register(e){this.commands.includes(e)||(this.commands.push(e),this.emitChange())}unregister(e){let n=this.commands.indexOf(e);n!==-1&&(this.commands.splice(n,1),this.emitChange())}},d=()=>typeof window<"u"&&(window.top||window),s=()=>{let t=d();if(t){let e=t[a];return e||(e=new i,t[a]=e),e}};s();var g=(t,e)=>{if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=t.length;n--;){let o=t[n],l=e[n];if(o!==l)return!1}return!0},r=class{key;_label;_badge;_badgeColor;_aliases;_href;onSelect;_visible;changeHandlers;constructor(e){this.key=`${h++}\xD7${String(Math.random()).substring(2)}`,this._label=e.label,this._badge=e.badge,this._badgeColor=e.badgeColor,this._aliases=e.aliases,this._href=e.href,this.onSelect=e.onSelect,this._visible=e.visible,this.changeHandlers=new Set}get label(){return this._label}set label(e){this._label!==e&&(this._label=e,this.emitChange())}get badge(){return this._badge}set badge(e){this._badge!==e&&(this._badge=e,this.emitChange())}get badgeColor(){return this._badgeColor}set badgeColor(e){this._badgeColor!==e&&(this._badgeColor=e,this.emitChange())}get aliases(){return this._aliases}set aliases(e){g(this._aliases,e)||(this._aliases=e,this.emitChange())}get href(){return this._href}set href(e){this._href!==e&&(this._href=e,this.emitChange())}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.emitChange())}remove(){s()?.unregister(this)}onChange(e){return this.changeHandlers.add(e),()=>this.changeHandlers.delete(e)}emitChange(){for(let e of this.changeHandlers)e()}},m=t=>{let e=new r(t);return s()?.register(e),e};export{s as a,m as b};
