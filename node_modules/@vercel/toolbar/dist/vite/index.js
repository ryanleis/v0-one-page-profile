import{a as u}from"../chunk-REB322LW.js";import{b as d}from"../chunk-XJSZYF63.js";import{c}from"../chunk-2NER6YV7.js";var o,i;function l(e){typeof window>"u"||typeof EventSource>"u"||!e||i||(i=e,o=new EventSource(`${e}/events`),f(),window.addEventListener("vercel-toolbar-ready",()=>{f()}))}function f(){let e=d();e?.isAuthenticated&&e.setLocalhostEventSource?.({subscribe:s,fetchLocal:v})}function s(e,t){if(!o)return()=>{};let r=n=>{try{let a=n.data&&typeof n.data=="string"?JSON.parse(n.data):void 0;a&&t(a)}catch{}};return o.addEventListener(e,r),()=>{o?.removeEventListener(e,r)}}async function v(e,t){if(!i)return{error:"No toolbar server"};try{let r=await fetch(`${i}${e}`,t?{method:"POST",body:JSON.stringify(t)}:void 0),n=await r.json();return r.ok?{result:n}:{error:n.error}}catch(r){return{error:`${r}`}}}function m(){s("branch-change",e=>{e&&location.reload()})}function S(){let e=u({branch:import.meta.env.VERCEL_TOOLBAR_BRANCH,ownerId:import.meta.env.VERCEL_TOOLBAR_OWNER_ID,projectId:import.meta.env.VERCEL_TOOLBAR_PROJECT_ID,deploymentId:import.meta.env.VERCEL_TOOLBAR_DEPLOYMENT_ID});return import.meta.env.DEV&&(c()?p():console.log(`
      You are rendering the Vercel Toolbar in development, but the configuration is missing.
      Make sure the plugin is added to the Vite config and the project has been linked using \`vercel link\`.
      For more details, visit https://vercel.com/docs/workflow-collaboration/vercel-toolbar/in-production-and-localhost/add-to-localhost
      `.trim())),e}function p(){l(import.meta.env.VERCEL_TOOLBAR_SERVER),m()}export{S as mountVercelToolbar};
